<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Weather Card — Tailwind + JS</title>
  <!-- Tailwind Play CDN (good for demos). For production use a proper build. -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-sky-50 min-h-screen flex items-center justify-center p-6">
  <div class="w-full max-w-md">
    <div class="bg-white/80 backdrop-blur rounded-2xl shadow-lg p-6">
      <h1 class="text-2xl font-semibold text-slate-700 mb-4">Weather Checker</h1>

      <form id="searchForm" class="flex gap-3 mb-4">
        <input id="cityInput" type="search" placeholder="Enter city (e.g. Karachi)" required
               class="flex-1 px-4 py-2 rounded-lg border border-slate-200 focus:outline-none focus:ring-2 focus:ring-sky-400" />
        <button type="submit" class="px-4 py-2 bg-sky-600 text-white rounded-lg shadow hover:bg-sky-700">Search</button>
      </form>

      <div id="status" class="text-sm text-slate-500 mb-4">Search a city to see current weather.</div>

      <div id="card" class="hidden bg-gradient-to-br from-white to-sky-50 rounded-xl p-5">
        <div class="flex items-center justify-between">
          <div>
            <div id="cityName" class="text-xl font-bold text-slate-700"></div>
            <div id="desc" class="text-sm text-slate-500"></div>
          </div>
          <img id="icon" src="" alt="" class="w-20 h-20"/>
        </div>

        <div class="mt-4 flex items-center gap-6">
          <div class="text-4xl font-extrabold text-slate-800" id="temp">—°C</div>
          <div class="text-sm text-slate-600">
            <div>Feels like <span id="feels">—°C</span></div>
            <div>Humidity <span id="humidity">—%</span></div>
            <div>Wind <span id="wind">— m/s</span></div>
          </div>
        </div>

        <div class="mt-4 text-xs text-slate-500" id="meta"></div>
      </div>

      <!-- small footer tips -->
      <p class="mt-4 text-xs text-slate-400">
        Powered by OpenWeatherMap. &copy; 2025 @asadjn99
      </p>
    </div>
  </div>

<script>
/* ---- CONFIG ---- */
const API_KEY = "5db5e57975bf026842b992ad6d878001"; // <<--- put your API key here

/* ---- DOM ---- */
const form = document.getElementById("searchForm");
const cityInput = document.getElementById("cityInput");
const statusEl = document.getElementById("status");
const card = document.getElementById("card");
const cityNameEl = document.getElementById("cityName");
const descEl = document.getElementById("desc");
const iconEl = document.getElementById("icon");
const tempEl = document.getElementById("temp");
const feelsEl = document.getElementById("feels");
const humidityEl = document.getElementById("humidity");
const windEl = document.getElementById("wind");
const metaEl = document.getElementById("meta");

/* ---- Helpers ---- */
function setStatus(text, kind = "info") {
  statusEl.textContent = text;
  statusEl.className = {
    info: "text-sm text-slate-500 mb-4",
    loading: "text-sm text-sky-600 mb-4",
    error: "text-sm text-red-600 mb-4"
  }[kind] || "text-sm text-slate-500 mb-4";
}

function showCard(show = true) {
  card.classList.toggle("hidden", !show);
}

/* ---- Fetch weather ---- */
async function fetchWeather(city) {
  if (!API_KEY || API_KEY === "YOUR_OPENWEATHERMAP_API_KEY") {
    throw new Error("Please set your OpenWeatherMap API key in the script (API_KEY).");
  }

  // OpenWeatherMap Current Weather endpoint, units=metric gives Celsius
  const url = `https://api.openweathermap.org/data/2.5/weather?q=${encodeURIComponent(city)}&appid=${API_KEY}&units=metric`;

  setStatus("Loading weather...", "loading");
  showCard(false);

  const res = await fetch(url);
  if (!res.ok) {
    const errText = await res.text();
    throw new Error(`Weather API error: ${res.status} ${res.statusText} — ${errText}`);
  }
  const data = await res.json();
  return data;
}

/* ---- Render ---- */
function renderWeather(data) {
  const name = `${data.name}${data.sys && data.sys.country ? ", " + data.sys.country : ""}`;
  const description = data.weather && data.weather[0] ? capitalize(data.weather[0].description) : "N/A";
  const iconCode = data.weather && data.weather[0] ? data.weather[0].icon : null;
  const iconUrl = iconCode ? `https://openweathermap.org/img/wn/${iconCode}@2x.png` : "";

  cityNameEl.textContent = name;
  descEl.textContent = description;
  iconEl.src = iconUrl;
  iconEl.alt = description;

  tempEl.textContent = Math.round(data.main.temp) + "°C";
  feelsEl.textContent = Math.round(data.main.feels_like) + "°C";
  humidityEl.textContent = data.main.humidity + "%";
  windEl.textContent = (data.wind.speed ?? 0) + " m/s";
  metaEl.textContent = `Last updated: ${new Date(data.dt * 1000).toLocaleString()}`;

  setStatus("Weather loaded.", "info");
  showCard(true);
}

/* ---- Utilities ---- */
function capitalize(s) {
  if (!s) return s;
  return s.split(" ").map(p => p[0].toUpperCase() + p.slice(1)).join(" ");
}

/* ---- Form submit handler ---- */
form.addEventListener("submit", async (e) => {
  e.preventDefault();
  const city = cityInput.value.trim();
  if (!city) return;
  try {
    const data = await fetchWeather(city);
    renderWeather(data);
  } catch (err) {
    console.error(err);
    setStatus(err.message || "Failed to fetch weather", "error");
    showCard(false);
  }
});

/* ---- Optional: show a sample city on load ---- */
window.addEventListener("DOMContentLoaded", () => {
  // Uncomment to auto-search a default city at startup
  // cityInput.value = "Karachi";
  // form.dispatchEvent(new Event("submit"));
});
</script>
</body>
</html>
